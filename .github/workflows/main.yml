name: GitHub Actions Workflow

on:
  push:
    branches:
      - '**'
  pull_request:
    branches:
      - '**'
  pull_request_target:
    types: [closed]

jobs:
  webhook:
    runs-on: ubuntu-latest

    steps:
      - name: Send webhook for push and pull request events
        if: github.event_name == 'push' || (github.event_name == 'pull_request' && github.event.action != 'closed')
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d '{"repository":"${{ github.repository }}","action":"${{ github.event_name }}","sender":"${{ github.actor }}","ref":"${{ github.ref }}"}' \
          https://your-webhook-endpoint-url/webhook

      - name: Send webhook for merge events
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d '{"repository":"${{ github.repository }}","action":"merge","sender":"${{ github.actor }}","head_ref":"${{ github.event.pull_request.head.ref }}","base_ref":"${{ github.event.pull_request.base.ref }}"}' \
          https://your-webhook-endpoint-url/webhook
